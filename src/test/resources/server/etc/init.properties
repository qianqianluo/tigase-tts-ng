--vhost-disable-dns-check = true
#--virt-hosts = 'localhost,a.localhost:clientCertCA=env('CONFIG_BASE_DIR')certs/root_ca.pem:clientCertRequired=true'
--virt-hosts = 'localhost,a.localhost:clientCertCA=certs/root_ca.pem:clientCertRequired=true'

#--tigase-primary-address = 'localhost.local'

config-type = '--gen-config-def'
trusted = [ 'admin@localhost', 'http@{clusterNode}' ]
admins = [ 'admin@localhost' ]

# basic-conf is removed in 7.2.0!
#basic-conf/logging/java.util.logging.FileHandler.limit=100000000
#basic-conf/logging/java.util.logging.FileHandler.count=20
#basic-conf/logging/.level=ALL

dataSource {
    default () {
        'uri' = env('JDBC_URI','jdbc://server/database')
    }
}

msgRepository {
    user-store-limit-enable = true
}

c2s {
    'urn:xmpp:sm:3' () { }
}

sess-man {
    msg-offline-pubsub-publisher-notifier () {
        msg-pubsub-jid = 'pubsub.localhost'
	    msg-pubsub-node = 'test'
	    msg-pubsub-publisher = 'sess-man@localhost.local'
    }
    pep () {}
    'jabber:iq:register' () {}
    message-archive () {
        msg-archive-paths = [ '-/message/result[urn:xmpp:mam:1]' '/message/body', '/message/subject' ]
    }
    message-archive-xep-0136 () {}
    'urn:xmpp:mam:1' () {}
}

httpServer {
    connections {
        8080 (active: false) {}
        8088 () {}
    }
}

http () {
    api-keys = [ 'test-api-key' ]
}

pubsub () {
    persistent-pep = true
}
muc () {
}
message-archive () {
    tags-support = true
}

